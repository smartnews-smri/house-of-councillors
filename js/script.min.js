let data={};const DESCRIPTIONS={kaiha:"各会派（政党）の名称や任期別の議員数。なお欠員があるため合計の議員数と定数は必ず一致するわけではありません",giin:"各議員の名前、選挙区、当選回数、経歴など。省略された経歴などを閲覧する場合はファイルをダウンロードしてください",gian:"第153回国会以降に提出された議案（法律案、決議案、予算案など）。第208回国会までで約8,600件。データ量が多いため最新500件のみ表示しています",syuisyo:"第1回国会以降に提出された質問主意書。第208回国会までで約6,800件。データ量が多いため最新500件のみ表示しています"},init=()=>{const t=()=>{const t=$("#tabs").find(".tab.selected").attr("for");$("#tab-info-description").text(DESCRIPTIONS[t]),$("#input-table-search").val(""),$("#download-current-wrapper").removeClass("available"),(t=>{$tbody=$("#data-table").find("tbody").empty(),$thead=$("#data-table").find("thead").empty();let e="<tr>";data[t][0].map(t=>{e+="<th>"+t+"</th>"}),e+="</tr>",$thead.append(e),data[t].slice(1).map(t=>{let e="<tr>";t.map(t=>{"https://"===t.toString().slice(0,8)?e+='<td><a href="'+t+'" target="_blank">'+t+"</a></td>":e+="<td>"+t+"</td>"}),e+="</tr>",$tbody.append(e)})})(t),(t=>{$("#download-full-csv").attr("href","./data/"+t+".csv"),$("#download-full-csv").attr("download",t+".csv"),$("#download-full-json").attr("href","./data/"+t+".json"),$("#download-full-json").attr("download",t+".json")})(t)};(e=>{let a=0;const n=["kaiha","giin","gian","syuisyo"];n.map(e=>{let o="data/"+e+".json";"gian"!==e&&"syuisyo"!==e||(o=o.replace(".json","_sample.json")),$.getJSON(o,function(o){data[e]=o,++a>=n.length&&(t(),$("#cover").fadeOut())})})})(),$("#tabs").find(".tab").on("click",function(){$(this).hasClass("selected")||($(this).siblings(".tab").removeClass("selected"),$(this).addClass("selected"),t())}),$("#download-current").on("click",function(t){if(t.preventDefault(),!$(this).closest("#download-current-wrapper").hasClass("available"))return!1;const e=(()=>{let t="";return $("#data-table").find("tr").each(function(){$(this).is(":visible")&&($(this).find("td,th").each(function(){t+=","+$(this).text()}),t+="\n")}),t=t.slice(1),t=t.slice(0,-1),t=t.replaceAll("\n,","\n")})(),a=new Uint8Array([239,187,191]),n=new Blob([a,e],{type:"text/csv"});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,".csv");else{const t=(window.URL||window.webkitURL).createObjectURL(n),e=document.createElement("a");e.href=t,e.download=".csv",e.click(),(window.URL||window.webkitURL).revokeObjectURL(t)}}),$("#social-button-copy").on("click",function(t){t.preventDefault();let e=$("<textarea></textarea>");e.text("参議院　議員・会派・議案・質問主意書データ - スマートニュース メディア研究所\nhttps://smartnews-smri.github.io/house-of-councillors/"),$(this).append(e),e.select(),document.execCommand("copy"),e.remove();let a=$(this).next(".text-copy");a.addClass("copied"),setTimeout(function(){a.removeClass("copied")},3e3)}),$("#input-table-search").on("change",function(t){let e=$(this).val();""==e?$("#download-current-wrapper").removeClass("available"):$("#download-current-wrapper").addClass("available"),$("#data-table").find("tbody").find("tr").each(function(){let t=!1;$(this).find("td").each(function(){-1!==$(this).text().indexOf(e)&&(t=!0)}),t?$(this).show():$(this).hide()})})};$(function(){init()});